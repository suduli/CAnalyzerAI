<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Micro-Interactions Test Suite - CAnalyzerAI</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    .test-section {
      margin: 40px 0;
      padding: 30px;
      background: var(--card-bg);
      border-radius: 16px;
      border: 1px solid var(--muted-border);
    }
    .test-title {
      color: var(--accent-cyan);
      font-family: var(--font-family-heading);
      margin-bottom: 20px;
      text-align: center;
      font-size: 24px;
    }
    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .test-item {
      padding: 20px;
      background: var(--surface);
      border-radius: 12px;
      border: 1px solid var(--muted-border);
      text-align: center;
    }
    .interaction-demo {
      min-height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 15px;
    }
    .performance-metrics {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }
    .metric {
      background: var(--bg-glass);
      padding: 15px;
      border-radius: 8px;
      text-align: center;
    }
    .metric-value {
      font-size: 24px;
      font-weight: bold;
      color: var(--accent-glow);
    }
    .metric-label {
      font-size: 12px;
      color: var(--text-secondary);
      text-transform: uppercase;
    }
    .device-test {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
      margin: 20px 0;
    }
    .device-indicator {
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 12px;
      text-transform: uppercase;
      font-weight: bold;
    }
    .device-mobile { background: var(--accent-cyan); color: #000; }
    .device-tablet { background: var(--accent-glow); color: #fff; }
    .device-desktop { background: var(--accent-magenta); color: #fff; }
    .test-status {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-left: 10px;
    }
    .status-pass { background: #39ff14; }
    .status-fail { background: #ff4757; }
    .status-pending { background: #ffa502; }
  </style>
</head>
<body>
  <!-- Particle Canvas -->
  <canvas id="particleCanvas"></canvas>
  
  <div class="app-container">
    <header class="header">
      <div class="header-content">
        <div class="header-left">
          <h1 class="app-title"><span class="title-icon">üß™</span> Micro-Interactions Test Suite</h1>
          <div class="version">Performance & UX Testing</div>
        </div>
        <div class="header-right">
          <div class="device-test">
            <span class="device-indicator device-mobile">Mobile</span>
            <span class="device-indicator device-tablet">Tablet</span>
            <span class="device-indicator device-desktop">Desktop</span>
          </div>
        </div>
      </div>
    </header>

    <div class="test-container">
      <!-- Performance Metrics Section -->
      <div class="test-section">
        <h2 class="test-title">Performance Metrics</h2>
        <div class="performance-metrics">
          <div class="metric">
            <div class="metric-value" id="fps">--</div>
            <div class="metric-label">FPS</div>
          </div>
          <div class="metric">
            <div class="metric-value" id="memoryUsage">--</div>
            <div class="metric-label">Memory (MB)</div>
          </div>
          <div class="metric">
            <div class="metric-value" id="interactionLatency">--</div>
            <div class="metric-label">Latency (ms)</div>
          </div>
          <div class="metric">
            <div class="metric-value" id="animationPerf">--</div>
            <div class="metric-label">Animation Score</div>
          </div>
        </div>
      </div>

      <!-- Button Interactions Test -->
      <div class="test-section">
        <h2 class="test-title">Button Micro-Interactions 
          <span class="test-status status-pending" id="buttonStatus"></span>
        </h2>
        <div class="test-grid">
          <div class="test-item">
            <div class="interaction-demo">
              <button class="btn btn--primary" data-test="ripple">Primary Button</button>
              <small>Test: Ripple effect on click</small>
            </div>
          </div>
          <div class="test-item">
            <div class="interaction-demo">
              <button class="btn btn--outline" data-test="hover">Outline Button</button>
              <small>Test: Hover animations</small>
            </div>
          </div>
          <div class="test-item">
            <div class="interaction-demo">
              <button class="btn btn--secondary" data-test="press">Secondary Button</button>
              <small>Test: Press feedback</small>
            </div>
          </div>
          <div class="test-item">
            <div class="interaction-demo">
              <button class="btn btn--sm" data-test="scale">Small Button</button>
              <small>Test: Scale transitions</small>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Interactions Test -->
      <div class="test-section">
        <h2 class="test-title">Form Micro-Interactions 
          <span class="test-status status-pending" id="formStatus"></span>
        </h2>
        <div class="test-grid">
          <div class="test-item">
            <div class="interaction-demo">
              <div class="form-group">
                <label class="form-label">Focus Animation</label>
                <input type="text" class="form-control" placeholder="Click to focus" data-test="focus">
              </div>
            </div>
          </div>
          <div class="test-item">
            <div class="interaction-demo">
              <div class="form-group">
                <label class="form-label">Validation Feedback</label>
                <input type="email" class="form-control" placeholder="Enter email" data-test="validation" required>
              </div>
            </div>
          </div>
          <div class="test-item">
            <div class="interaction-demo">
              <div class="form-group">
                <label class="form-label">Floating Label</label>
                <input type="text" class="form-control" data-test="floating">
              </div>
            </div>
          </div>
          <div class="test-item">
            <div class="interaction-demo">
              <div class="form-group">
                <label class="form-label">Error Animation</label>
                <input type="text" class="form-control" placeholder="Enter short text" data-test="error">
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Card Interactions Test -->
      <div class="test-section">
        <h2 class="test-title">Card Micro-Interactions 
          <span class="test-status status-pending" id="cardStatus"></span>
        </h2>
        <div class="test-grid">
          <div class="test-item">
            <div class="metric-card" data-test="metric-hover">
              <div class="metric-label">Hover Effects</div>
              <div class="metric-value">42</div>
            </div>
          </div>
          <div class="test-item">
            <div class="complexity-card" data-test="complexity-morph">
              <div class="complexity-formula">V(G) = E - N + 2P</div>
              <div class="complexity-value">8</div>
              <div class="complexity-label">Morphing Animation</div>
            </div>
          </div>
          <div class="test-item">
            <div class="summary-item" data-test="summary-gradient">
              <div class="summary-label">Gradient Effects</div>
              <div class="summary-value">100%</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Upload Zone Test -->
      <div class="test-section">
        <h2 class="test-title">Upload Zone Interactions 
          <span class="test-status status-pending" id="uploadStatus"></span>
        </h2>
        <div class="upload-zone" data-test="upload-drag">
          <div class="upload-content">
            <div class="upload-icon">üìÅ</div>
            <h3 class="upload-title">Test Drag & Drop</h3>
            <p class="upload-subtitle">Hover and click to test animations</p>
          </div>
        </div>
      </div>

      <!-- Navigation Transitions Test -->
      <div class="test-section">
        <h2 class="test-title">Navigation Transitions 
          <span class="test-status status-pending" id="navStatus"></span>
        </h2>
        <div class="test-grid">
          <div class="analysis-panel" data-test="slide-in">
            <div class="panel-header">
              <h3 class="panel-title">Slide In Animation</h3>
            </div>
            <div class="panel-content">
              <p>Tests progressive disclosure and entrance animations</p>
            </div>
          </div>
          <div class="comparison-panel" data-test="stagger">
            <div class="panel-header">
              <h3 class="panel-title">Staggered Animation</h3>
            </div>
            <div class="panel-content">
              <p>Tests timing and sequencing</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Cross-browser Compatibility Test -->
      <div class="test-section">
        <h2 class="test-title">Browser Compatibility 
          <span class="test-status status-pending" id="browserStatus"></span>
        </h2>
        <div class="test-grid">
          <div class="test-item">
            <h4>Backdrop Filter Support</h4>
            <div id="backdropSupport">Testing...</div>
          </div>
          <div class="test-item">
            <h4>CSS Animations</h4>
            <div id="animationSupport">Testing...</div>
          </div>
          <div class="test-item">
            <h4>Transform3D Support</h4>
            <div id="transform3dSupport">Testing...</div>
          </div>
          <div class="test-item">
            <h4>Touch Events</h4>
            <div id="touchSupport">Testing...</div>
          </div>
        </div>
      </div>

      <!-- Performance Test Results -->
      <div class="test-section">
        <h2 class="test-title">Test Results Summary</h2>
        <div id="testResults" class="test-grid">
          <!-- Results will be populated by JavaScript -->
        </div>
      </div>
    </div>

    <footer class="footer">
      <div class="footer-content">
        <div class="footer-left">
          Micro-Interactions Test Suite &copy; 2024
        </div>
        <div class="footer-right">
          <span id="testScore">Testing in progress...</span>
        </div>
      </div>
    </footer>
  </div>

  <script src="app.js"></script>
  <script>
    // Advanced Testing Suite for Micro-Interactions
    class InteractionTester {
      constructor() {
        this.tests = {
          buttons: { passed: 0, total: 4 },
          forms: { passed: 0, total: 4 },
          cards: { passed: 0, total: 3 },
          upload: { passed: 0, total: 1 },
          navigation: { passed: 0, total: 2 },
          browser: { passed: 0, total: 4 }
        };
        this.startTime = performance.now();
        this.init();
      }

      init() {
        this.setupPerformanceMonitoring();
        this.runCompatibilityTests();
        this.setupInteractionTests();
        this.startTestSequence();
      }

      setupPerformanceMonitoring() {
        let frameCount = 0;
        let lastTime = performance.now();
        
        const updateFPS = () => {
          frameCount++;
          const currentTime = performance.now();
          if (currentTime - lastTime >= 1000) {
            const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
            document.getElementById('fps').textContent = fps;
            frameCount = 0;
            lastTime = currentTime;
          }
          requestAnimationFrame(updateFPS);
        };
        updateFPS();

        // Memory usage (approximate)
        if (performance.memory) {
          setInterval(() => {
            const memory = Math.round(performance.memory.usedJSHeapSize / 1048576);
            document.getElementById('memoryUsage').textContent = memory;
          }, 2000);
        }

        // Interaction latency testing
        let interactionTimes = [];
        document.addEventListener('click', (e) => {
          const latency = performance.now() - e.timeStamp;
          interactionTimes.push(latency);
          if (interactionTimes.length > 10) interactionTimes.shift();
          const avgLatency = Math.round(interactionTimes.reduce((a, b) => a + b, 0) / interactionTimes.length);
          document.getElementById('interactionLatency').textContent = avgLatency;
        });

        // Animation performance score
        setTimeout(() => {
          const fps = parseInt(document.getElementById('fps').textContent) || 0;
          const score = fps >= 58 ? 'A+' : fps >= 45 ? 'A' : fps >= 30 ? 'B' : 'C';
          document.getElementById('animationPerf').textContent = score;
        }, 3000);
      }

      runCompatibilityTests() {
        // Backdrop filter support
        const testEl = document.createElement('div');
        testEl.style.backdropFilter = 'blur(1px)';
        const backdropSupported = testEl.style.backdropFilter !== '';
        document.getElementById('backdropSupport').textContent = backdropSupported ? '‚úÖ Supported' : '‚ùå Not Supported';
        if (backdropSupported) this.tests.browser.passed++;

        // CSS Animations
        const animationSupported = 'animation' in testEl.style;
        document.getElementById('animationSupport').textContent = animationSupported ? '‚úÖ Supported' : '‚ùå Not Supported';
        if (animationSupported) this.tests.browser.passed++;

        // Transform3D
        testEl.style.transform = 'translate3d(1px, 1px, 1px)';
        const transform3dSupported = testEl.style.transform !== '';
        document.getElementById('transform3dSupport').textContent = transform3dSupported ? '‚úÖ Supported' : '‚ùå Not Supported';
        if (transform3dSupported) this.tests.browser.passed++;

        // Touch events
        const touchSupported = 'ontouchstart' in window;
        document.getElementById('touchSupport').textContent = touchSupported ? '‚úÖ Supported' : '‚ùå Not Supported';
        if (touchSupported) this.tests.browser.passed++;

        this.updateTestStatus('browserStatus', this.tests.browser);
      }

      setupInteractionTests() {
        // Button tests
        document.querySelectorAll('[data-test="ripple"], [data-test="hover"], [data-test="press"], [data-test="scale"]').forEach(btn => {
          btn.addEventListener('click', () => {
            this.tests.buttons.passed++;
            this.updateTestStatus('buttonStatus', this.tests.buttons);
          });
        });

        // Form tests
        document.querySelectorAll('[data-test="focus"]').forEach(input => {
          input.addEventListener('focus', () => {
            this.tests.forms.passed++;
            this.updateTestStatus('formStatus', this.tests.forms);
          });
        });

        document.querySelectorAll('[data-test="validation"]').forEach(input => {
          input.addEventListener('input', () => {
            if (input.value.includes('@')) {
              this.tests.forms.passed++;
              this.updateTestStatus('formStatus', this.tests.forms);
            }
          });
        });

        // Card tests
        document.querySelectorAll('[data-test*="metric"], [data-test*="complexity"], [data-test*="summary"]').forEach(card => {
          card.addEventListener('mouseenter', () => {
            this.tests.cards.passed++;
            this.updateTestStatus('cardStatus', this.tests.cards);
          });
        });

        // Upload test
        document.querySelectorAll('[data-test="upload-drag"]').forEach(zone => {
          zone.addEventListener('mouseenter', () => {
            this.tests.upload.passed++;
            this.updateTestStatus('uploadStatus', this.tests.upload);
          });
        });

        // Navigation tests
        setTimeout(() => {
          this.tests.navigation.passed = 2; // Auto-pass for animation completion
          this.updateTestStatus('navStatus', this.tests.navigation);
        }, 2000);
      }

      updateTestStatus(elementId, testGroup) {
        const element = document.getElementById(elementId);
        const percentage = (testGroup.passed / testGroup.total) * 100;
        
        if (percentage === 100) {
          element.className = 'test-status status-pass';
        } else if (percentage > 0) {
          element.className = 'test-status status-pending';
        } else {
          element.className = 'test-status status-fail';
        }
      }

      startTestSequence() {
        // Auto-trigger some interactions for demonstration
        setTimeout(() => {
          const firstButton = document.querySelector('[data-test="ripple"]');
          if (firstButton) firstButton.click();
        }, 1000);

        setTimeout(() => {
          const firstInput = document.querySelector('[data-test="focus"]');
          if (firstInput) firstInput.focus();
        }, 2000);

        setTimeout(() => {
          const firstCard = document.querySelector('[data-test="metric-hover"]');
          if (firstCard) firstCard.dispatchEvent(new Event('mouseenter'));
        }, 3000);

        // Generate final test report
        setTimeout(() => {
          this.generateTestReport();
        }, 5000);
      }

      generateTestReport() {
        const totalTests = Object.values(this.tests).reduce((sum, test) => sum + test.total, 0);
        const passedTests = Object.values(this.tests).reduce((sum, test) => sum + test.passed, 0);
        const score = Math.round((passedTests / totalTests) * 100);
        
        document.getElementById('testScore').textContent = `Test Score: ${score}% (${passedTests}/${totalTests})`;
        
        const resultsContainer = document.getElementById('testResults');
        resultsContainer.innerHTML = `
          <div class="test-item">
            <h4>Button Interactions</h4>
            <div>${this.tests.buttons.passed}/${this.tests.buttons.total} passed</div>
          </div>
          <div class="test-item">
            <h4>Form Interactions</h4>
            <div>${this.tests.forms.passed}/${this.tests.forms.total} passed</div>
          </div>
          <div class="test-item">
            <h4>Card Interactions</h4>
            <div>${this.tests.cards.passed}/${this.tests.cards.total} passed</div>
          </div>
          <div class="test-item">
            <h4>Upload Interactions</h4>
            <div>${this.tests.upload.passed}/${this.tests.upload.total} passed</div>
          </div>
          <div class="test-item">
            <h4>Navigation Transitions</h4>
            <div>${this.tests.navigation.passed}/${this.tests.navigation.total} passed</div>
          </div>
          <div class="test-item">
            <h4>Browser Compatibility</h4>
            <div>${this.tests.browser.passed}/${this.tests.browser.total} passed</div>
          </div>
        `;
      }
    }

    // Initialize testing when page loads
    document.addEventListener('DOMContentLoaded', () => {
      new InteractionTester();
    });

    // Device detection for responsive testing
    function detectDevice() {
      const width = window.innerWidth;
      if (width <= 768) return 'mobile';
      if (width <= 1024) return 'tablet';
      return 'desktop';
    }

    // Update device indicators
    window.addEventListener('resize', () => {
      const device = detectDevice();
      document.querySelectorAll('.device-indicator').forEach(el => {
        el.style.opacity = '0.5';
      });
      document.querySelector(`.device-${device}`).style.opacity = '1';
    });

    // Trigger initial device detection
    window.dispatchEvent(new Event('resize'));
  </script>
</body>
</html>
